const togglePopUp=()=>{const e=document.querySelectorAll(".img")[3],t=document.querySelector(".outside-popup"),s=document.querySelector(".popup-util");document.querySelectorAll(".popup");t.addEventListener("click",e=>{"outside-popup"==e.target.classList[0]&&(t.classList.toggle("disabled"),document.body.classList.toggle("truncated"))}),e.addEventListener("click",()=>{t.classList.toggle("disabled"),document.body.classList.toggle("truncated")}),s.addEventListener("click",e=>{e.target.classList.forEach(e=>{"popup-close-btn"==e&&(t.classList.toggle("disabled"),document.body.classList.toggle("truncated"))})}),document.addEventListener("keydown",e=>{"Escape"==e.key&&(t.classList.add("disabled"),document.body.classList.remove("truncated"))})},trackerBubble=()=>{const e=document.querySelector(".tracker"),t=document.querySelector(".header-container");document.addEventListener("scroll",s=>{scrollY>t.offsetHeight?e.classList.add("active-tracker"):e.classList.remove("active-tracker")}),e.addEventListener("click",()=>{document.documentElement.scrollTop=document.body.scrollTop=0})};togglePopUp(),trackerBubble();let paso=parseInt(localStorage.getItem("step"));paso||(paso=1);const pasoActual="#step-"+paso;document.querySelector(pasoActual).classList.add("mostrar");const tabs=()=>{document.querySelectorAll(".steps-timeline").forEach(e=>{e.addEventListener("click",e=>{paso=parseInt(e.target.dataset.step),localStorage.setItem("step",paso),mostrarSeccion()})})},mostrarSeccion=()=>{const e=document.querySelector(".mostrar");if(e){e.classList.remove("mostrar");const t=`[data-step="${e.id.split("-")[1]}"]`;document.querySelector(t).classList.remove("selected")}const t="#step-"+paso,s=document.querySelector(t);s.classList.add("mostrar");const a=`[data-step="${s.id.split("-")[1]}"]`;document.querySelector(a).classList.add("selected")},iniciarApp=()=>{mostrarSeccion(),document.querySelectorAll(".steps-timeline").forEach(e=>{e.addEventListener("click",e=>{paso=parseInt(e.target.dataset.step),localStorage.setItem("step",paso),mostrarSeccion()})})};mostrarSeccion(),document.querySelectorAll(".steps-timeline").forEach(e=>{e.addEventListener("click",e=>{paso=parseInt(e.target.dataset.step),localStorage.setItem("step",paso),mostrarSeccion()})});const contactToggle=()=>{const e=document.querySelector(".contact-to-section"),t=document.querySelector(".thank-resend");e.classList.toggle("contact_hidden"),t.classList.toggle("contact_hidden"),t.addEventListener("click",s=>{"resend"==s.target.id&&(t.classList.toggle("contact_hidden"),e.classList.toggle("contact_hidden"),localStorage.removeItem("contact-send"),email.value="",message.value="",nombre.value="",contactVerify())})},isThank=()=>{Boolean(localStorage.getItem("contact-send"))&&contactToggle()};Boolean(localStorage.getItem("contact-send"))&&contactToggle();const contactVerify=()=>{const e=document.querySelector(".loading-spinner");submit.addEventListener("click",()=>{if(validarContact()){e.classList.remove("spinner-hidden");const t=new FormData;t.append("nombre",nombre.value??""),t.append("email",email.value??""),t.append("message",message.value??"");try{fetch("/joacoh-web-portfolio/contact",{method:"post",body:t}).then(e=>e.json()).then(t=>{e.classList.add("spinner-hidden"),!0===t.result?(localStorage.setItem("contact-send","true"),contactToggle()):(e.classList.add("spinner-hidden"),alert("el correo no se pudo enviar."))})}catch(t){e.classList.add("spinner-hidden"),alert("el correo no se pudo enviar.")}}})},validateEmail=e=>String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),contactMaxLength=()=>{message.addEventListener("input",e=>{if(message.value.length<=255){document.querySelector("#count").textContent=message.value.length}else message.value=message.value.slice(0,255)})},validarContact=()=>""!=email.value&&validateEmail(email.value)?(email.classList.remove("failure"),""==nombre.value?(nombre.classList.add("failure"),!1):(nombre.classList.remove("failure"),""==message.value?(message.classList.add("failure"),!1):(message.classList.remove("failure"),!0))):(email.classList.add("failure"),!1),copyToClip=()=>{document.querySelectorAll(".copy").forEach(e=>{let t=e.textContent;e.addEventListener("click",()=>{e.textContent="Copied!",e.classList.add("copied"),e.classList.remove("copy"),setTimeout(()=>{e.textContent=t,e.classList.remove("copied"),e.classList.add("copy")},500),navigator.clipboard.writeText(t)})})},contact=()=>{document.querySelector("#submit"),document.querySelector('[name="nombre"]'),document.querySelector('[name="email"]'),document.querySelector('[name="message"]');contactVerify(),document.querySelectorAll(".copy").forEach(e=>{let t=e.textContent;e.addEventListener("click",()=>{e.textContent="Copied!",e.classList.add("copied"),e.classList.remove("copy"),setTimeout(()=>{e.textContent=t,e.classList.remove("copied"),e.classList.add("copy")},500),navigator.clipboard.writeText(t)})}),validarContact(),contactMaxLength()};contact();